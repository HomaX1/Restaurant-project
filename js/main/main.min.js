var modalWrap=".modal-wrap",galleryFunctions={showModalImg:function(){$(".gallery-products").on("click",function(a){"gallery-product"===a.target.parentElement.className&&($(modalWrap).css("display","flex"),$(".modal-product__img").attr("src",a.target.currentSrc))})},closeModalImg:function(){$(".modal-product__icon-cancel").on("click",function(){$(modalWrap).hide()}),$(document).mouseup(function(a){0===$(modalWrap).has(a.target).length&&$(modalWrap).hide()})},renderModalImg:function(){galleryFunctions.showModalImg(),galleryFunctions.closeModalImg()}};
var iconMenu=".main-header__icon-menu",iconCancelMenu=".navigation__icon-cancel",navigation=".navigation",navItem=".navigation-item",insideMenu=".inside-menu",mainHeader=".main-header",insideMenuLink=".inside-menu__link",headerFunctions={resize:function(){document.documentElement.clientWidth>=768?$(navigation).css("display","flex"):$(navigation).css("display","none")},showMenu:function(){$("body").append($(navigation)),$(navigation).fadeIn().css("display","flex")},closeMenu:function(n){0===$(this).children(".inside-menu").length?($(insideMenu).hide(),document.documentElement.clientWidth>=768&&$(this).has(n)?$(navigation).css("display","flex"):$(navigation).fadeOut(function(){$(mainHeader).after($(navigation))})):(headerFunctions.showInsideMenu(),$(insideMenuLink).click(function(){document.documentElement.clientWidth>=768&&$(this).has(n)?$(navigation).css("display","flex"):$(navigation).fadeOut(function(){$(mainHeader).after($(navigation))})}))},showInsideMenu:function(){$(insideMenu).fadeToggle(250)},closeInsideMenu:function(){$(document).mouseup(function(n){0===$(navigation).has(n.target).length&&$(insideMenu).fadeOut()})},headerRender:function(){$(window).resize(headerFunctions.resize),$(iconMenu).click(headerFunctions.showMenu),$(iconCancelMenu).click(headerFunctions.closeMenu),$(navItem).click(headerFunctions.closeMenu),headerFunctions.closeInsideMenu()}};
var homeFunctions={slider:function(){$(".fade").slick({dots:!1,infinite:!0,speed:500,fade:!0,cssEase:"linear"})},arrowsStyle:function(){$(".slick-arrow").text(""),$(".slick-prev").html('<i class="arrow fa fa-chevron-left" aria-hidden="true"></i>'),$(".slick-next").html('<i class="arrow fa fa-chevron-right" aria-hidden="true"></i>')},homeRender:function(){this.slider(),this.arrowsStyle()}};
!function(){"use strict";var e="",a=(window.location.href,".menu-page"),n="#all-menu";header.innerHTML=MyApp.templates.header(),footer.innerHTML=MyApp.templates.footer(),home.innerHTML=MyApp.templates.home(),headerFunctions.headerRender(),homeFunctions.homeRender();var s={renderPage:function(e,a,n){$("#content").children().empty(),e.innerHTML=n?a({menu:n}):a()},createMenu:function(a){e=this;var n=a.filter(function(a){return a.category===e?a:"menu-link"===e?a:void 0});s.renderPage(menu,MyApp.templates.menu,n),"menu-link"===e?$(".menu-icons__link_all").addClass("activeCategory"):$(".menu-icons__link_"+e).addClass("activeCategory"),menuFunctions.listShow(n,e)},pageNavigation:function(){$("body").on("click",".navigation, .footer-navigation, .main-header__logo, .menu-icons, .info-buttons",function(e){var t=e.target.dataset.id;switch($(".navigation-item__link").removeClass("active-page-link"),t){case"home-link":case"logo-link":s.renderPage(home,MyApp.templates.home),$(".home-page").addClass("active-page-link"),homeFunctions.homeRender(),"#";break;case"menu-link":$.get("/menu.json",s.createMenu.bind(t)),$(a).addClass("active-page-link"),$(n).addClass("active-page-link"),"#menu";break;case"dishes":$.get("/menu.json",s.createMenu.bind(t)),$(a).addClass("active-page-link"),$(n).addClass("active-page-link"),"#menu/dishes";break;case"soups":$.get("/menu.json",s.createMenu.bind(t)),$(a).addClass("active-page-link"),$(n).addClass("active-page-link"),"#menu/soups";break;case"salads":$.get("/menu.json",s.createMenu.bind(t)),$(a).addClass("active-page-link"),$(n).addClass("active-page-link"),"#menu/salads";break;case"desserts":$.get("/menu.json",s.createMenu.bind(t)),$(a).addClass("active-page-link"),$(n).addClass("active-page-link"),"#menu/desserts";break;case"beverages":$.get("/menu.json",s.createMenu.bind(t)),$(a).addClass("active-page-link"),$(n).addClass("active-page-link"),"#menu/beverages";break;case"reservation-link":s.renderPage(reservation,MyApp.templates.reservation),$(".reservation-page").addClass("active-page-link"),"#reservation",reservationFunctions.renderReservation();break;case"gallery-link":$.get("/menu.json",function(e){s.renderPage(gallery,MyApp.templates.gallery,e),galleryFunctions.renderModalImg()}),$(".gallery-page").addClass("active-page-link"),"#gallery";break;case"contacts-link":s.renderPage(contacts,MyApp.templates.contacts),$(".contacts-page").addClass("active-page-link"),"#contacts"}})}};s.pageNavigation()}();
var sortInfo=".sorts-info",sortText=".sorts-info__text",sortList=".sorts-list",menuFunctions={listShow:function(t){$(sortInfo).click(function(){$(sortList).fadeToggle()}),menuFunctions.selectOption(t)},selectOption:function(t){$(sortList).click(function(e){$(sortList).fadeOut();var n=e.target.innerText;switch(n){case"From Cheap To Expensive":t.sort(menuFunctions.increaseSort),menu.innerHTML=MyApp.templates.menu({menu:t}),$(sortText).text(n),menuFunctions.listShow(t);break;case"From Expensive To Cheap":t.sort(menuFunctions.decreaseSort),menu.innerHTML=MyApp.templates.menu({menu:t}),$(sortText).text(n),menuFunctions.listShow(t)}}),$("body").mouseup(function(t){0===$(".sorts").has(t.target).length&&$(sortList).fadeOut()})},increaseSort:function(t,e){var n=parseFloat(t.price),o=parseFloat(e.price);return n>o?1:n<o?-1:void 0},decreaseSort:function(t,e){var n=parseFloat(t.price),o=parseFloat(e.price);return n>o?-1:n<o?1:void 0}};
var schemeTables=".scheme-tables",tableNumberInput="#table-number",formSelect=".form-select",formSelectList=".form-select-list",formSelectListFrom=".form-select-list-from",formSelectListTo=".form-select-list-to",formButton=".form-reservation__button",validName="#valid-name",validPhone="#valid-phone",validTableNumber="#valid-table-number",formInput=".form-reservation__input",successSubmit=".form-reservation__text",tablesItem=".scheme-tables__item",reservationFunctions={showFormList:function(){$(formSelect).click(function(){$(this).hasClass("form-select-from")?($(formSelectListTo).fadeOut(),$(formSelectListFrom).fadeToggle()):($(formSelectListFrom).fadeOut(),$(formSelectListTo).fadeToggle())}),$(document).mouseup(function(e){0===$(formSelect).has(e.target).length&&$(formSelectList).fadeOut()})},selectOptionList:function(){$(formSelectList).click(function(e){var t="";$(".form-select-list li").hasClass("disabled-time")||($(e.target.parentElement).hasClass("form-select-list-from")?($(successSubmit).hide(),$(formSelectList).fadeOut(),t=e.target.innerText,$(".form-select__text-from").text(t),$(".form-select-from").removeClass("border")):($(successSubmit).hide(),$(formSelectList).fadeOut(),t=e.target.innerText,$(".form-select__text-to").text(t),$(".form-select-to").removeClass("border")))})},numberTransfer:function(){$(schemeTables).on("click",function(e){if($(successSubmit).hide(),$(validTableNumber).hide(),$(tableNumberInput).removeClass("border"),$(e.target).hasClass("scheme-tables__item")&&!$(e.target).hasClass("booked-table")){var t=+$(e.target).attr("data-id");$(tableNumberInput).val(t)}if("IMG"!==e.target.tagName&&$(e.target).attr("data-times").length>0){var s=JSON.parse($(e.target).attr("data-times"));$(".form-select-list__item").removeClass("disabled-time"),$(".form-select-list-from li").each(function(e,t){var a=parseInt($(t).text());s.forEach(function(e){for(var s=e.timeFrom;s<e.timeTo;s++)a===s&&$(t).addClass("disabled-time")})}),$(".form-select-list-to li").each(function(e,t){var a=parseInt($(t).text());s.forEach(function(e){for(var s=e.timeFrom+1;s<=e.timeTo;s++)a===s&&$(t).addClass("disabled-time")})})}})},validation:function(){$(formInput).keyup(function(e){$(successSubmit).hide();switch(e.target.id){case"first-name":if(""!==$(this).val()){/^[A-Za-z]{1,50}$/.test($(this).val())?($(this).removeClass("border"),$(validName).hide()):($(this).addClass("border"),$(validName).text("You can use latin letters only!").show())}break;case"phone-number":if(""!==$(this).val()){/^\d{3}[\-]\d{3}[\-]\d{4}$/.test($(this).val())?($(this).removeClass("border"),$(validPhone).hide()):($(this).addClass("border"),$(validPhone).text("Enter the phone number as in the example!").show())}}})},getBookedTables:function(){$.get("/tables.json",function(e){$(tablesItem).each(function(t,s){var a=e.filter(function(e){return e.tablesNumber===+$(s).attr("data-id")});!1!==a[0].booking&&0!==a[0].booking.length?$(s).attr("data-times",JSON.stringify(a[0].booking)):$(s).addClass("booked-table")})})},sendData:function(){$(formButton).on("click",function(e){e.preventDefault(),""===$("#first-name").val()&&($(formInput).addClass("border"),$(validName).text("Please, enter your name!").show()),""===$("#phone-number").val()&&($(formInput).addClass("border"),$(validPhone).text("Please, enter your phone number!").show()),""===$(tableNumberInput).val()&&($(tableNumberInput).addClass("border"),$(validTableNumber).text("Click on the table you want to book on the picture!").show(),reservationFunctions.numberTransfer()),"none"!==$(".form-select__text-from").text()&&"none"!==$(".form-select__text-to").text()||$(formSelect).addClass("border"),""!==$(formInput).val()&&""!==$(tableNumberInput).val()&&"none"!==$(".form-select__text").text()&&$(successSubmit).fadeIn()})},renderReservation:function(){reservationFunctions.getBookedTables(),reservationFunctions.showFormList(),reservationFunctions.selectOptionList(),reservationFunctions.numberTransfer(),reservationFunctions.validation(),reservationFunctions.sendData()}};